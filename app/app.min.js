/*
   app-dust-backbone - v0.0.0
*/
(function(){var a;(a=window.Inn)==null&&(window.Inn={}),Inn.Model=Backbone.Model.extend({url:function(){return"app/models/"+this.id+".json"}})}).call(this),function(){var a;(a=window.Inn)==null&&(window.Inn={}),Inn.Collection=Backbone.Collection.extend({url:function(){return"#"},model:Inn.Model})}.call(this),function(){var a;(a=window.Inn)==null&&(window.Inn={}),Inn.ViewsCollection=function(){function a(){}return a.prototype._list=_([]),a.prototype.add=function(a){var b=this;return this._list.push(a),a.on("ready",function(){if(!b._list.filter(function(a){return!a.ready}).length)return b.trigger("ready")}),a.render(),this},a.prototype.remove=function(a){return a.destroy(),this},a.prototype.isEmpty=function(){return!this._list.length},_.extend(a.prototype,Backbone.Events),a}()}.call(this),function(){var a;(a=window.Inn)==null&&(window.Inn={}),Inn.View=Backbone.View.extend({initialize:function(a,b){return this.partials=b!=null?b:[],this._load()},destroy:function(){return this.parent=null,this},render:function(){var a,b,c,d,e,f,g,h,i,j=this;h=this.partials;for(b=d=0,f=h.length;d<f;b=++d)c=h[b],this.children.add(c);i=this.pullChildren();for(b=e=0,g=i.length;e<g;b=++e)a=i[b],this.children.add(a);return this.children.isEmpty()?setTimeout(function(){return j.ready=!0,j.trigger("ready")}):this.children.on("ready",function(){return j.trigger("ready")}),this},_load:function(){var a=this;return setTimeout(function(){return a.trigger("loaded")}),this},pullChildren:function(){return[]},isRoot:function(){return this._parent===null},ready:!1,_parent:null,children:new Inn.ViewsCollection,options:{placeholderClassName:"layoutPlaceholder",templateFolder:"",templateFormat:"js"}})}.call(this),function(){var a;(a=window.Inn)==null&&(window.Inn={}),Inn.DataManager=function(){function a(){this._dataSets=[],_.extend(this,Backbone.Events)}return a.prototype.addDataAsset=function(a,b){if(a instanceof Inn.Model||a instanceof Inn.Collection){if(!a.id&&!b)throw new Inn.Error("dataAsset id is required");return b&&(a.id=b),_.indexOf(this._dataSets,a)===-1&&this._dataSets.push(a),this.trigger("add:dataAsset",a),this}throw new Inn.Error("dataAsset shold be an instance of Inn.Model or Inn.Collection")},a.prototype.getDataAsset=function(a){var b;return b=_.find(this._dataSets,function(b){return b.id===a}),b!=null?b:null},a.prototype.removeDataAsset=function(a){var b;return b=_.reject(this._dataSets,function(b){return b.id===a}),this._dataSets.length===b.length?null:(this._dataSets=b,this.trigger("remove:dataAsset"))},a.prototype.destroy=function(){var a;return a=this,_.each(this._dataSets,function(b){return a.removeDataAsset(b.id)})},a}()}.call(this);